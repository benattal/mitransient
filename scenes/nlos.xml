<scene version="3.3.0">


	<default name="integrator" value="transient_path"/>
	<default name="spp" value="4096" />
	<default name="resx" value="128" />
	<default name="resy" value="128" />

	<!-- Transient Integrator with Confocal Projector -->
    <integrator type='$integrator'>
      <boolean name="camera_unwarp" value="false"/>
      <boolean name="use_nlos_only" value="false"/>
      <integer name="max_depth" value="8"/>
      <string name="temporal_filter" value="box"/>
      <float name="gaussian_stddev" value="2.0"/>

      <!-- Confocal Projector: single spot with sigma=0.001 -->
      <emitter type="confocal_projector" name="confocal_projector">
        <integer name="grid_rows" value="1"/>
        <integer name="grid_cols" value="1"/>
        <float name="grid_sigma" value="0.001"/>
        <float name="grid_intensity" value="100000.0"/>
        <string name="grid_spacing" value="uniform"/>
        <float name="fov" value="0.55"/>
        <boolean name="is_confocal" value="true"/>
        <integer name="max_rejection_samples" value="4"/>
        <!-- Projector frame aligned with camera (same as camera to_world) -->
        <transform name="frame">
			<rotate x="1" angle="179.999991348578"/>
			<rotate y="1" angle="-74.99997135121387"/>
			<rotate z="1" angle="180.00000500895632"/>
		</transform>
      </emitter>
    </integrator>

    <sensor type="perspective" id="sensor">
        <string name="fov_axis" value="smaller"/>
        <float name="near_clip" value="0.100000" />
		<float name="far_clip" value="15000.000000" />
        <float name="fov" value="39.3077"/>
        <transform name="to_world">
			<rotate x="1" angle="179.999991348578"/>
			<rotate y="1" angle="-74.99997135121387"/>
			<rotate z="1" angle="180.00000500895632"/>
		</transform>
        <sampler type="independent">
            <integer name="sample_count" value="$spp"/>
        </sampler>
        <!-- Transient Film -->
        <film type="transient_hdr_film">
            <integer name="width"  value="$resx"/>
            <integer name="height" value="$resy"/>
            <integer name="temporal_bins" value="1000"/>
            <float name="start_opl" value="0"/>
            <float name="bin_width_opl" value="0.01"/>
            <rfilter type="box"/>
        </film>
    </sensor>


<!-- Materials -->

	<bsdf type="twosided" id="default-bsdf" name="default-bsdf">
		<bsdf type="diffuse" name="bsdf"/>
	</bsdf>
    
    <bsdf type="twosided" id="mat-diffuse.white">
		<bsdf type="diffuse">
			<rgb value="1.000000 1.000000 1.000000" name="reflectance" />
		</bsdf>
	</bsdf>
<!-- Emitters -->


<!-- Shapes -->

	<shape type="ply" id="elm__3" name="elm__3">
		<string name="filename" value="meshes/Plane.ply"/>
		<boolean name="face_normals" value="true"/>
		<ref id="mat-diffuse.white" name="bsdf"/>
	</shape>
	<shape type="ply" id="elm__4" name="elm__4">
		<string name="filename" value="meshes/Sphere.ply"/>
		<boolean name="face_normals" value="true"/>
		<ref id="mat-diffuse.white" name="bsdf"/>
	</shape>

<!-- Volumes -->

</scene>
